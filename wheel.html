<!DOCTYPE html>
<html lang=nl>
<head>
	<meta charset=utf-8>
	<title>Test coffee flavor wheel svg</title>
	<link href="index.css" rel="stylesheet" type="text/css" />
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>

<svg id="svgC" width="60%"  viewBox="0 0 700 600">
	<defs>
    <filter id="shade" x="0" y="0" width="200%" height="200%">
      <feOffset result="offOut" in="SourceGraphic" dx="1" dy="20" />
      <feColorMatrix result="matrixOut" in="offOut" type="matrix"
      values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" />
      <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="10" />
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
    </filter>
		<filter id="dropshadow" width = "160%" height="160%">
			<feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
			<feOffset dx="2" dy="4" result="offsetblur"/>
			<feMerge>
				<feMergeNode/>
				<feMergeNode in="SourceGraphic"/>
			</feMerge>
		</filter>
  </defs>
<circle onclick="resetWheel()" id ="test" cx="270" cy="270" r="38" stroke="#000000" stroke-width="2"/>

</svg>
<script>

  var clickedElements = [];
	var radius =[40,100,160,240];
	var rings = [{radius1:45, radius2:115, textpos:1}]
	var circlex=270;
	var circley=270;
	var steps =85;
	var mysvg = document.getElementById("svgC");
	var slowness = 5;
	var originalsvg = mysvg.innerHTML;
	var ringlist = [{ring:1,fromStep: 0, toStep: 18, color: "#DA1D23", name: "Fruity" },
	{ring:1,fromStep: 18, toStep: 28, color: "#EAB40C", name: "Sour/Fermented" },
	{ring:1,fromStep: 28, toStep: 38, color: "#3AA359", name: "Green/vegetative" },
	{ring:1,fromStep: 38, toStep: 54, color: "#0AA4B6", name: "Other" },
	{ring:1,fromStep: 54, toStep: 62, color: "#C94930", name: "Roasted" },
	{ring:1,fromStep: 62, toStep: 68, color: "#AE203E", name: "Spices" },
	{ring:1,fromStep: 68, toStep: 73, color: "#A97B64", name: "Nutty/Cocoa" },
	{ring:1,fromStep: 73, toStep: 81, color: "#E55831", name: "Sweet" },
	{ring:1,fromStep: 81, toStep: 85, color: "#DB0D69", name: "Floral" },
	{ring:2,fromStep: 0, toStep: 4, color: "#DD4C51", name: "Berry" },
  {ring:2,fromStep: 4, toStep: 6, color: "#C94A44", name: "Dried fruit" },
	{ring:2,fromStep: 6, toStep: 14, color: "#F2684C", name: "Other Fruit" },
	{ring:2,fromStep: 14, toStep: 18, color: "#E1C315", name: "Citrus Fruit" },
	{ring:2,fromStep: 18, toStep: 24, color: "#E1C315", name: "Sour" },
	{ring:2,fromStep: 24, toStep: 28, color: "#B09733", name: "Alcohol/Fermented" },
	{ring:2,fromStep: 28, toStep: 29, color: "#A2B028", name: "Olive oil" },
	{ring:2,fromStep: 29, toStep: 30, color: "#708933", name: "raw" },
	{ring:2,fromStep: 30, toStep: 37, color: "#3AA255", name: "Green vegetative" },
	{ring:2,fromStep: 37, toStep: 38, color: "#5E9A80", name: "beany" },
	{ring:2,fromStep: 38, toStep: 48, color: "#9DB2B7", name: "Papery/Musty" },
	{ring:2,fromStep: 48, toStep: 54, color: "#76C0CB", name: "Chemical" },
	{ring:2,fromStep: 54, toStep: 55, color: "#CAA465", name: "Pipe tobacco" },
	{ring:2,fromStep: 55, toStep: 56, color: "#DFBD7E", name: "tobacco" },
	{ring:2,fromStep: 56, toStep: 60, color: "#BE8663", name: "Burnt" },
	{ring:2,fromStep: 60, toStep: 62, color: "#DDAF61", name: "Cereal" },
	{ring:2,fromStep: 62, toStep: 63, color: "#794652", name: "Pungent" },
	{ring:2,fromStep: 63, toStep: 64, color: "#CC3C42", name: "Pepper" },
	{ring:2,fromStep: 64, toStep: 68, color: "#B14D57", name: "Brown Spice" },
	{ring:2,fromStep: 68, toStep: 71, color: "#C78869", name: "Nutty" },
	{ring:2,fromStep: 71, toStep: 73, color: "#BB764C", name: "Cocoa" },
	{ring:2,fromStep: 73, toStep: 77, color: "#D45A59", name: "Brown Sugar" },
	{ring:2,fromStep: 77, toStep: 78, color: "#F89A80", name: "Vanilla" },
	{ring:2,fromStep: 78, toStep: 79, color: "#F37674", name: "Vanillin" },
	{ring:2,fromStep: 79, toStep: 80, color: "#E75B68", name: "Overal Sweet" },
	{ring:2,fromStep: 80, toStep: 81, color: "#D0545F", name: "Sweet Aromatics" },
	{ring:2,fromStep: 81, toStep: 82, color: "#975E6D", name: "Black Tea" },
	{ring:2,fromStep: 82, toStep: 85, color: "#E0719C", name: "Floral" },
	{ring:3,fromStep: 0, toStep: 1, color: "#3E0317", name: "Blackberry" },
	{ring:3,fromStep: 1, toStep: 2, color: "#E52968", name: "Raspberry" },
	{ring:3,fromStep: 2, toStep: 3, color: "#6469B0", name: "Blueberry" },
	{ring:3,fromStep: 3, toStep: 4, color: "#EF2D36", name: "Strawberry" },
	{ring:3,fromStep: 4, toStep: 5, color: "#B53B54", name: "Raisin" },
	{ring:3,fromStep: 5, toStep: 6, color: "#A5446F", name: "Prune" },
	{ring:3,fromStep: 6, toStep: 7, color: "#D07C36", name: "Coconut" },
	{ring:3,fromStep: 7, toStep: 8, color: "#E73451", name: "Cherry" },
	{ring:3,fromStep: 8, toStep: 9, color: "#E65656", name: "Pomegranate" },
	{ring:3,fromStep: 9, toStep: 10, color: "#F89A1C", name: "Pineapple" },
	{ring:3,fromStep: 10, toStep: 11, color: "#AEB92C", name: "Grape" },
	{ring:3,fromStep: 11, toStep: 12, color: "#4EB947", name: "Apple" },
	{ring:3,fromStep: 12, toStep: 13, color: "#F68A5C", name: "Peach" },
	{ring:3,fromStep: 13, toStep: 14, color: "#BAA635", name: "Pear" },
	{ring:3,fromStep: 14, toStep: 15, color: "#F26355", name: "Grapefruit" },
	{ring:3,fromStep: 15, toStep: 16, color: "#E2631E", name: "Orange" },
	{ring:3,fromStep: 16, toStep: 17, color: "#FDE402", name: "Lemon" },
	{ring:3,fromStep: 17, toStep: 18, color: "#7EB138", name: "Lime" },
	{ring:3,fromStep: 18, toStep: 19, color: "#9EA718", name: "Sour Aromatics" },
	{ring:3,fromStep: 19, toStep: 20, color: "#94A770", name: "Acetic Acid" },
	{ring:3,fromStep: 20, toStep: 21, color: "#D0B34F", name: "Butyric Acid" },
	{ring:3,fromStep: 21, toStep: 22, color: "#8EB646", name: "Isovaleric Acid" },
	{ring:3,fromStep: 22, toStep: 23, color: "#FAEF08", name: "Citric Acid" },
	{ring:3,fromStep: 23, toStep: 24, color: "#C1BA09", name: "Malic Acid" },
	{ring:3,fromStep: 24, toStep: 25, color: "#8F1B53", name: "Winey" },
	{ring:3,fromStep: 25, toStep: 26, color: "#B34039", name: "Whiskey" },
	{ring:3,fromStep: 26, toStep: 27, color: "#BA9232", name: "Fermented" },
	{ring:3,fromStep: 27, toStep: 28, color: "#8B6439", name: "Overripe" },
	//{ring:3,fromStep: 28, toStep: 29, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 29, toStep: 30, color: "#FFFFFF", name: "EMPTY" },
	{ring:3,fromStep: 30, toStep: 31, color: "#A2BC2B", name: "under-ripe" },
	{ring:3,fromStep: 31, toStep: 32, color: "#62AA3C", name: "Peapod" },
	{ring:3,fromStep: 32, toStep: 33, color: "#03A653", name: "Fresh" },
	{ring:3,fromStep: 33, toStep: 34, color: "#048549", name: "Dark green" },
	{ring:3,fromStep: 34, toStep: 35, color: "#27B44B", name: "Vegetative" },
	{ring:3,fromStep: 35, toStep: 36, color: "#A3A830", name: "Hay-like" },
	{ring:3,fromStep: 36, toStep: 37, color: "#7AC141", name: "Herb-like" },
	//{ring:3,fromStep: 37, toStep: 38, color: "#FFFFFF", name: "EMPTY" },
	{ring:3,fromStep: 38, toStep: 39, color: "#8B8C90", name: "Stale" },
	{ring:3,fromStep: 39, toStep: 40, color: "#BDB175", name: "Cardboard" },
	{ring:3,fromStep: 40, toStep: 41, color: "#FEFEF4", name: "Papery" },
	{ring:3,fromStep: 41, toStep: 42, color: "#744F02", name: "Woody" },
	{ring:3,fromStep: 42, toStep: 43, color: "#A3A36F", name: "Moldy/Damp" },
	{ring:3,fromStep: 43, toStep: 44, color: "#C9B583", name: "Musty/Dusty" },
	{ring:3,fromStep: 44, toStep: 45, color: "#988847", name: "Musty/Earthy" },
	{ring:3,fromStep: 45, toStep: 46, color: "#9D977F", name: "Animalic" },
	{ring:3,fromStep: 46, toStep: 47, color: "#CC7B6A", name: "Meaty/Brothy" },
	{ring:3,fromStep: 47, toStep: 48, color: "#DB646A", name: "Phenolic" },
	{ring:3,fromStep: 48, toStep: 49, color: "#80A89D", name: "Bitter" },
	{ring:3,fromStep: 49, toStep: 50, color: "#DEF2FD", name: "Salty" },
	{ring:3,fromStep: 50, toStep: 51, color: "#7A9BAE", name: "Medicinal" },
	{ring:3,fromStep: 51, toStep: 52, color: "#039FB8", name: "Petroleum" },
	{ring:3,fromStep: 52, toStep: 53, color: "#5E777B", name: "Skunky" },
	{ring:3,fromStep: 53, toStep: 54, color: "#120C0C", name: "Rubber" },
	//{ring:3,fromStep: 54, toStep: 55, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 55, toStep: 56, color: "#FFFFFF", name: "EMPTY" },
	{ring:3,fromStep: 56, toStep: 57, color: "#B9A449", name: "Acrid" },
	{ring:3,fromStep: 57, toStep: 58, color: "#899893", name: "Ashy" },
	{ring:3,fromStep: 58, toStep: 59, color: "#A1743B", name: "Smoky" },
	{ring:3,fromStep: 59, toStep: 60, color: "#894810", name: "Brown. Roast" },
	{ring:3,fromStep: 60, toStep: 61, color: "#B7906F", name: "Grain" },
	{ring:3,fromStep: 61, toStep: 62, color: "#EB9D5E", name: "Malt" },
	//{ring:3,fromStep: 62, toStep: 63, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 63, toStep: 64, color: "#FFFFFF", name: "EMPTY" },
	{ring:3,fromStep: 64, toStep: 65, color: "#C78935", name: "Anise" },
	{ring:3,fromStep: 65, toStep: 66, color: "#8C292C", name: "Nutmeg" },
	{ring:3,fromStep: 66, toStep: 67, color: "#E5762E", name: "Cinnamon" },
	{ring:3,fromStep: 67, toStep: 68, color: "#A16C5A", name: "Clove" },
	{ring:3,fromStep: 68, toStep: 69, color: "#D4AD13", name: "Peanuts" },
	{ring:3,fromStep: 69, toStep: 70, color: "#9D5433", name: "Hazelnut" },
	{ring:3,fromStep: 70, toStep: 71, color: "#C89F83", name: "Almond" },
	{ring:3,fromStep: 71, toStep: 72, color: "#692A19", name: "Chocolate" },
	{ring:3,fromStep: 72, toStep: 73, color: "#470603", name: "Dark chocolate" },
	{ring:3,fromStep: 73, toStep: 74, color: "#310C0F", name: "Molasses" },
	{ring:3,fromStep: 74, toStep: 75, color: "#AE341F", name: "Mapple syrup" },
	{ring:3,fromStep: 75, toStep: 76, color: "#D78823", name: "Caramelized" },
	{ring:3,fromStep: 76, toStep: 77, color: "#DA5C1F", name: "Honey" },
	//{ring:3,fromStep: 77, toStep: 78, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 78, toStep: 79, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 79, toStep: 80, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 80, toStep: 81, color: "#FFFFFF", name: "EMPTY" },
	//{ring:3,fromStep: 81, toStep: 82, color: "#FFFFFF", name: "EMPTY" },
	{ring:3,fromStep: 82, toStep: 83, color: "#F7F1BD", name: "Chamomile" },
	{ring:3,fromStep: 83, toStep: 84, color: "#EF5A78", name: "Rose" },
	{ring:3,fromStep: 84, toStep: 85, color: "#F99E1B", name: "Jasmine" }

];

	function resetWheel(){
		//mysvg.insertBefore(x, null);
		mysvg.innerHTML = originalsvg;
		mysvg.getElementsByTagName("path");
		drawWheel();
	}

	function clickAction(x){
		//mysvg.insertBefore(x, null);
		x.style.stroke = "white";
		//x.style.strokeWidth = "3px";
		x.setAttribute('transform', "scale(1.10), translate(-25,-25)");
		//x.setAttribute('stroke-dasharray', "4,3");
		x.setAttribute("fill-opacity", "0.7");
		x.setAttribute("filter", "url(#dropshadow)");
		mysvg.insertBefore(x, null);

	}

	function drawWheel(){
  //mysvg.selectAll("*").remove();
		for (let i = 0; i < ringlist.length;i++){
				var testa = setTimeout(function() {drawPart(ringlist[i].ring,ringlist[i].fromStep,ringlist[i].toStep,
				ringlist[i].color, ringlist[i].name)},(slowness*i));
				console.log("test"+i);
			}
	}
  function drawPart(ring, fromStep, toStep, color, name){
		var rInner = radius[ring-1];
		var rOuter = radius[ring];
		var fromradial = (fromStep/steps)*2*Math.PI;
		var toradial = (toStep/steps)*2*Math.PI;
		var x1 = (circlex + (Math.sin(fromradial)*rInner));
		var y1 = (circley - (Math.cos(fromradial)*rInner));
		var x2 = (circlex + (Math.sin(fromradial)*rOuter));
		var y2 = (circley - (Math.cos(fromradial)*rOuter));
		var x3 = (circlex + (Math.sin(toradial)*rInner));
		var y3 = (circley - (Math.cos(toradial)*rInner));
		var x4 = (circlex + (Math.sin(toradial)*rOuter));
		var y4 = (circley - (Math.cos(toradial)*rOuter));
		var xText = (circlex + rInner);
		var yText = circley;
		var pathString = "M " + x1 + " " +y1 + "L "+x2+" "+y2 + " A "+ rOuter +
		" "+rOuter + " 1 0 1 "+x4 + " "+y4 + "L "+x3+" "+y3 + "A "+ rInner +" " +
		rInner+ " 0 0 0 " + x1 + " " +y1;
	  var newPath = document.createElementNS("http://www.w3.org/2000/svg", 'path');
		newPath.setAttribute("d", pathString);


		var newText = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		newText.setAttribute("x", xText);
		newText.setAttribute("y", yText);
		var rotater = (toStep/steps)*360;
		//newText.setAttribute("x", "50%");
		//newText.setAttribute("y", "50%");
		//newText.setAttribute("text-anchor", "middle");
		newText.setAttribute('transform', "rotate("+rotater+")");
		newText.innerHTML = "test";


		var newGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g');
    newGroup.setAttribute("ID", ("r:"+ring+"s:"+fromStep+"n:"+name));
		newGroup.setAttribute("class", "slice");
		newGroup.setAttribute("onclick","clickAction(this)");
	  newGroup.style.stroke = "white";
		newGroup.style.fill = color;
		newGroup.style.strokeWidth = "1px";
		newGroup.appendChild(newPath);
		newGroup.appendChild(newText);
		//mysvg.removeChild(getElementById(("r:"+ring+"s:"+fromStep+"n:"+name));
		mysvg.appendChild(newGroup);

	}


</script>
</body>
</html>
